# ============================================================================
# RAILWAY ENVIRONMENT CONFIGURATION - IntoWork Dashboard
# ============================================================================
# Copy this file and populate with actual values in Railway dashboard
# Reference: https://docs.railway.app/guides/variables
# ============================================================================

# ============================================================================
# BACKEND DATABASE (PostgreSQL on Railway)
# ============================================================================
# Railway provides DATABASE_URL automatically when PostgreSQL plugin is added
# Format: postgresql://user:password@host:port/database
# This will be auto-populated, but shown here for reference
DATABASE_URL=postgresql://postgres:PASSWORD@hostname.proxy.rlwy.net:PORT/railway

# ============================================================================
# NEXTAUTH CONFIGURATION (Required - Generate new secrets for production)
# ============================================================================
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=GENERATE_NEW_SECRET_WITH_openssl_rand_-base64_32

# The URL where your frontend is deployed (production)
# For development: http://localhost:3000
# For production: https://your-frontend-domain.com
NEXTAUTH_URL=https://your-frontend-domain.com

# Backend API URL (used by frontend to make API calls)
# For development: http://localhost:8001/api
# For production: https://intowork-backend-production.up.railway.app/api
NEXT_PUBLIC_API_URL=https://intowork-backend-production.up.railway.app/api

# Force HTTPS for production
NEXT_PUBLIC_FORCE_HTTPS=true

# ============================================================================
# CORS CONFIGURATION (Allowed Origins)
# ============================================================================
# Comma-separated list of allowed frontend origins
# Add both your main domain and Vercel preview URLs
CORS_ORIGIN=https://your-frontend-domain.com,https://your-frontend-domain-*.vercel.app

# Alternative: individual origin variables if needed
ALLOWED_ORIGINS=https://your-frontend-domain.com,https://your-frontend-domain-*.vercel.app

# ============================================================================
# NEXTAUTH PROVIDERS (OAuth Configuration)
# ============================================================================
# Google OAuth (Optional)
# Create credentials at: https://console.cloud.google.com
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth (Optional)
# Create credentials at: https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# Azure AD / Entra ID (Optional - supports both employer and candidate SSO)
# Create app registration at: https://portal.azure.com
AZURE_AD_CLIENT_ID=your-azure-client-id
AZURE_AD_CLIENT_SECRET=your-azure-client-secret
AZURE_AD_TENANT_ID=your-azure-tenant-id

# ============================================================================
# BACKEND SECURITY
# ============================================================================
# Secret key for FastAPI session/token signing
# Generate with: openssl rand -base64 32
SECRET_KEY=GENERATE_NEW_SECRET_WITH_openssl_rand_-base64_32

# ============================================================================
# ENVIRONMENT & LOGGING
# ============================================================================
# Set to 'production' for Railway
ENVIRONMENT=production

# Logging level (debug, info, warning, error, critical)
LOG_LEVEL=info

# ============================================================================
# OPTIONAL: FILE UPLOAD CONFIGURATION
# ============================================================================
# Max file upload size in MB (for CV uploads)
MAX_UPLOAD_SIZE_MB=10

# Allowed file types (comma-separated extensions)
ALLOWED_FILE_TYPES=pdf,doc,docx

# ============================================================================
# OPTIONAL: EMAIL CONFIGURATION (For notifications)
# ============================================================================
# SMTP server details if you want to send emails
SMTP_SERVER=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_USERNAME=your-email@example.com
SMTP_PASSWORD=your-app-password
SENDER_EMAIL=noreply@your-domain.com

# ============================================================================
# OPTIONAL: THIRD-PARTY INTEGRATIONS
# ============================================================================
# Sentry (Error tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Redis (If using caching/sessions - optional)
REDIS_URL=redis://localhost:6379

# ============================================================================
# VERCEL FRONTEND CONFIGURATION (If frontend is on Vercel)
# ============================================================================
# These go in Vercel dashboard environment variables
# NEXT_PUBLIC_API_URL=https://intowork-backend-production.up.railway.app/api
# NEXTAUTH_URL=https://your-frontend-domain.com
# NEXTAUTH_SECRET=SAME_VALUE_AS_BACKEND

# ============================================================================
# RAILWAY-SPECIFIC CONFIGURATION
# ============================================================================
# This is set automatically by Railway
# PORT=8000

# Database connection pool settings (for production)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_PRE_PING=true

# ============================================================================
# MONITORING & ALERTING
# ============================================================================
# Health check endpoint (Railway will use this)
# /health - Basic health check
# /api/docs - Swagger UI documentation

# ============================================================================
# NOTES FOR PRODUCTION DEPLOYMENT
# ============================================================================
# 1. NEVER commit actual secrets to git - use Railway dashboard only
# 2. Rotate secrets regularly (especially NEXTAUTH_SECRET and SECRET_KEY)
# 3. Use different NEXTAUTH_URL for staging and production
# 4. Update CORS_ORIGIN to match your actual frontend domain
# 5. Enable HTTPS everywhere (NEXT_PUBLIC_FORCE_HTTPS=true)
# 6. Test migrations before production deployment
# 7. Set up monitoring and alerting in Railway dashboard
# 8. Configure backup strategy for PostgreSQL
# 9. Monitor disk usage for file uploads (/uploads/cv directory)
# 10. Keep dependencies updated regularly
